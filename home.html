<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>CatÃ¡logo 3D Prints â€” Mobile</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#06b6d4;--muted:#94a3b8;--glass: rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial}
    body{background:linear-gradient(180deg,#071022 0%, #071525 60%);color:#e6eef6;display:flex;align-items:flex-start;justify-content:center;padding:18px}
    .wrap{max-width:420px;width:100%}
    header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    header h1{font-size:16px;margin:0}
    /* Page / product viewport */
    .viewer{background:var(--card);border-radius:14px;padding:14px;box-shadow:0 6px 24px rgba(2,6,23,0.6)}

    /* carousel */
    .carousel{position:relative;height:300px;border-radius:10px;overflow:hidden;background:var(--glass);display:flex;align-items:center;justify-content:center}
    .carousel img{max-width:100%;max-height:100%;object-fit:contain;transition:transform .35s ease;touch-action:none}
    .thumbs{display:flex;gap:8px;margin-top:10px;overflow:auto}
    .thumbs img{height:44px;border-radius:8px;opacity:.7;cursor:pointer}
    .thumbs img.active{opacity:1;outline:2px solid var(--accent)}
    .nav-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0.25);border:none;color:white;padding:8px;border-radius:8px;cursor:pointer}
    .nav-btn.left{left:8px}
    .nav-btn.right{right:8px}

    /* product meta */
    .meta{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
    .title{font-weight:600}
    .price{font-size:18px;color:var(--accent);font-weight:700}

    .desc{color:var(--muted);font-size:13px;margin-top:8px}

    .controls{display:flex;gap:8px;margin-top:12px}
    .btn{flex:1;padding:10px;border-radius:10px;border:0;cursor:pointer;font-weight:600}
    .btn.primary{background:linear-gradient(90deg,var(--accent),#7c3aed);color:#031025}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

    /* pager vertical */
    .pager{display:flex;flex-direction:column;gap:8px;margin-top:12px}
    .pager button{background:transparent;border:1px solid rgba(255,255,255,0.03);padding:8px;border-radius:8px;color:var(--muted);text-align:left}

    /* cart floating */
    .cart-fab{position:fixed;right:18px;bottom:18px;background:var(--accent);color:#021025;padding:12px;border-radius:999px;box-shadow:0 8px 24px rgba(6,182,212,0.18);border:none;display:flex;gap:8px;align-items:center}
    .cart-count{background:rgba(0,0,0,0.2);padding:4px 8px;border-radius:999px;font-weight:700}

    /* modal */
    .modal{position:fixed;left:0;top:0;width:100%;height:100%;display:none;align-items:flex-end}
    .modal.show{display:flex}
    .sheet{background:linear-gradient(180deg,#071225,#051026);width:100%;max-width:420px;border-radius:16px 16px 0 0;padding:14px;box-shadow:0 -8px 40px rgba(2,6,23,0.7)}
    .cart-item{display:flex;gap:10px;align-items:center;padding:8px 0;border-bottom:1px dashed rgba(255,255,255,0.02)}
    .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:8px}
    .qty{display:flex;gap:6px;align-items:center}
    .small{font-size:13px;color:var(--muted)}

    footer.small{color:var(--muted);font-size:12px;margin-top:10px;text-align:center}

    @media(min-width:820px){body{padding:30px}.wrap{max-width:680px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <svg width="26" height="26" viewBox="0 0 24 24"><path fill="currentColor" d="M5 3h14v2H5zM5 19h14v2H5zM3 8h18v2H3zM3 13h18v2H3z"/></svg>
      <h1>CatÃ¡logo 3D Prints</h1>
    </header>

    <div class="viewer" id="viewer">
      <!-- product UI rendered by JS -->
    </div>

    <div style="height:14px"></div>
    <footer class="small">Feito com HTML/CSS/JS â€” mobile-first. Teste em seu telefone e clique no botÃ£o do carrinho.</footer>
  </div>

  <button class="cart-fab" id="openCartBtn" aria-label="Abrir carrinho">
    <span>ðŸ§º</span>
    <span id="cartTotal">0</span>
  </button>

  <div class="modal" id="cartModal" role="dialog" aria-modal="true">
    <div class="sheet">
      <div style="display:flex;align-items:center;justify-content:space-between">
        <strong>Seu pedido</strong>
        <button id="closeCart">Fechar</button>
      </div>
      <div id="cartList" style="margin-top:10px"></div>
      <div style="margin-top:12px;display:flex;gap:8px">
        <button class="btn primary" id="sendWhatsapp">Enviar no WhatsApp</button>
        <button class="btn ghost" id="clearCart">Limpar</button>
      </div>
      <div style="height:14px"></div>
    </div>
  </div>

  <script>
  /* ====== Dados de exemplo ====== */
  const PRODUCTS = [
    {id:1,title:'Chaveiro Azul',price:4.00,desc:'Chaveiro anti-stress azul pequeno.',images:['assets/img/chaveiro_antistress_azul_1.jpg','assets/img/chaveiro_antistress_azul_2.jpg','assets/img/chaveiro_antistress_azul_3.jpg','assets/img/chaveiro_antistress_azul_4.jpg']},
    {id:2,title:'Suporte para Fone (PETG)',price:25.00,desc:'Suporte compacto para fones de ouvido.',images:['assets/fone1.jpg','assets/fone2.jpg']},
    {id:3,title:'Mini Vasinho (Resina)',price:30.00,desc:'Vasinho decorativo, ideal para suculentas.',images:['assets/vaso1.jpg','assets/vaso2.jpg']},
    {id:4,title:'Clip de Cabo',price:5.00,desc:'Organizador simples para fios.',images:['assets/cabo1.jpg']},
    {id:5,title:'Suporte para Celular',price:18.00,desc:'Stand compacto para mesa.',images:['assets/cel1.jpg']},
    {id:6,title:'Case para AirTag',price:20.00,desc:'Case resistente impressa sob medida.',images:['assets/air1.jpg']},
    {id:7,title:'Mini Caixa Decorativa',price:22.00,desc:'Caixa com tampa, ideal para pequenos objetos.',images:['assets/caixa1.jpg']}
  ];

  /* ====== State ====== */
  let page = 0; // produto atual
  const viewer = document.getElementById('viewer');
  const cartKey = 'catalogo3d_cart_v1';

  function loadCart(){
    try{const s = localStorage.getItem(cartKey); return s?JSON.parse(s):[] }catch(e){return[]}
  }
  function saveCart(c){localStorage.setItem(cartKey,JSON.stringify(c)); updateCartCount()}
  function updateCartCount(){const c = loadCart().reduce((s,i)=>s+i.qty,0); document.getElementById('cartTotal').textContent = c}

  /* ====== Render lista de produtos com paginaÃ§Ã£o ====== */
  const ITEMS_PER_PAGE = 5;

  function renderProductList() {
    const start = page * ITEMS_PER_PAGE;
    const end = start + ITEMS_PER_PAGE;
    const items = PRODUCTS.slice(start, end);

    viewer.innerHTML = '';

    items.forEach(p => {
      const card = document.createElement('div');
      card.style.background = 'var(--card)';
      card.style.borderRadius = '12px';
      card.style.padding = '12px';
      card.style.marginBottom = '12px';

      const img = document.createElement('img');
      img.src = p.images[0];
      img.style.width = '100%';
      img.style.borderRadius = '10px';

      const title = document.createElement('div');
      title.className = 'title';
      title.textContent = p.title;

      const price = document.createElement('div');
      price.className = 'price';
      price.textContent = formatBRL(p.price);

      const desc = document.createElement('div');
      desc.className = 'small';
      desc.textContent = p.desc;

      const btn = document.createElement('button');
      btn.className = 'btn primary';
      btn.textContent = 'Adicionar ao carrinho';
      btn.style.marginTop = '10px';
      btn.addEventListener('click', () => addToCart(p));

      card.appendChild(img);
      card.appendChild(title);
      card.appendChild(price);
      card.appendChild(desc);
      card.appendChild(btn);

      viewer.appendChild(card);
    });

    renderPagination();
  }

  function renderPagination() {
    const totalPages = Math.ceil(PRODUCTS.length / ITEMS_PER_PAGE);
    const pager = document.createElement('div');
    pager.className = 'pager';

    const btnPrev = document.createElement('button');
    btnPrev.textContent = 'PÃ¡gina anterior';
    btnPrev.disabled = page === 0;
    btnPrev.addEventListener('click', () => { page--; renderProductList(); });

    const btnNext = document.createElement('button');
    btnNext.textContent = 'PrÃ³xima pÃ¡gina';
    btnNext.disabled = page >= totalPages - 1;
    btnNext.addEventListener('click', () => { page++; renderProductList(); });

    pager.appendChild(btnPrev);
    pager.appendChild(btnNext);
    viewer.appendChild(pager);
  }

  // substitui a chamada antiga
  function renderProduct(i){
    const p = PRODUCTS[i];
    viewer.innerHTML = '';

    const carousel = document.createElement('div'); carousel.className='carousel';
    const img = document.createElement('img'); img.src = p.images[0]; img.alt = p.title; carousel.appendChild(img);

    const left = document.createElement('button'); left.className='nav-btn left'; left.innerHTML='â—€';
    const right = document.createElement('button'); right.className='nav-btn right'; right.innerHTML='â–¶';
    carousel.appendChild(left); carousel.appendChild(right);

    // thumbs
    const thumbs = document.createElement('div'); thumbs.className='thumbs';
    p.images.forEach((src,idx)=>{const t = document.createElement('img'); t.src=src; if(idx===0) t.classList.add('active'); t.addEventListener('click',()=>{img.src=src; [...thumbs.children].forEach(x=>x.classList.remove('active')); t.classList.add('active')}); thumbs.appendChild(t)})

    const meta = document.createElement('div'); meta.className='meta';
    const leftMeta = document.createElement('div'); leftMeta.innerHTML = `<div class="title">${p.title}</div><div class="small">SKU #${p.id} Â· ${p.desc}</div>`;
    const price = document.createElement('div'); price.className='price'; price.textContent = formatBRL(p.price);
    meta.appendChild(leftMeta); meta.appendChild(price);

    const controls = document.createElement('div'); controls.className='controls';
    const btnAdd = document.createElement('button'); btnAdd.className='btn primary'; btnAdd.textContent='Adicionar ao carrinho';
    btnAdd.addEventListener('click',()=> addToCart(p));
    const btnPrevNext = document.createElement('div'); btnPrevNext.style.display='flex'; btnPrevNext.style.gap='8px';
    const btnPrev = document.createElement('button'); btnPrev.className='btn ghost'; btnPrev.textContent='Anterior'; btnPrev.addEventListener('click',()=> changePage(-1));
    const btnNext = document.createElement('button'); btnNext.className='btn ghost'; btnNext.textContent='PrÃ³ximo'; btnNext.addEventListener('click',()=> changePage(1));
    btnPrevNext.appendChild(btnPrev); btnPrevNext.appendChild(btnNext);

    controls.appendChild(btnAdd); controls.appendChild(btnPrevNext);

    viewer.appendChild(carousel);
    viewer.appendChild(thumbs);
    viewer.appendChild(meta);
    viewer.appendChild(controls);

    // carousel behaviour
    let idx=0;
    left.addEventListener('click',()=>{ idx=(idx-1+p.images.length)%p.images.length; img.src=p.images[idx]; setActiveThumb(idx) })
    right.addEventListener('click',()=>{ idx=(idx+1)%p.images.length; img.src=p.images[idx]; setActiveThumb(idx) })
    function setActiveThumb(n){ [...thumbs.children].forEach((c,i)=>c.classList.toggle('active',i===n)) }

    // swipe up/down to change product (mobile friendly)
    let startY=null; img.addEventListener('touchstart',e=> startY = e.touches[0].clientY);
    img.addEventListener('touchend',e=>{ if(startY===null) return; const endY = e.changedTouches[0].clientY; const dy = startY-endY; if(dy>50) changePage(1); else if(dy<-50) changePage(-1); startY=null });
  }

  function changePage(delta){ page = (page+delta+PRODUCTS.length)%PRODUCTS.length; renderProduct(page) }

  function addToCart(prod){ const cart = loadCart(); const found = cart.find(x=>x.id===prod.id); if(found) found.qty++; else cart.push({id:prod.id,title:prod.title,price:prod.price,qty:1, img: prod.images[0]}); saveCart(cart); alert('Adicionado ao carrinho') }

  /* ====== Cart UI ====== */
  const cartModal = document.getElementById('cartModal');
  document.getElementById('openCartBtn').addEventListener('click',()=>{ renderCart(); cartModal.classList.add('show') });
  document.getElementById('closeCart').addEventListener('click',()=>cartModal.classList.remove('show'));
  document.getElementById('clearCart').addEventListener('click',()=>{ localStorage.removeItem(cartKey); renderCart(); updateCartCount(); });

  function renderCart(){ const list = document.getElementById('cartList'); const cart = loadCart(); list.innerHTML=''; if(!cart.length) { list.innerHTML='<div class="small">Carrinho vazio</div>'; return }
    cart.forEach(item=>{
      const row = document.createElement('div'); row.className='cart-item';
      row.innerHTML = `<img src="${item.img}" alt=""><div style="flex:1"><div>${item.title}</div><div class="small">${formatBRL(item.price)} Â· <span class='small'>qty: ${item.qty}</span></div></div>`;
      const qty = document.createElement('div'); qty.className='qty';
      const plus = document.createElement('button'); plus.textContent='+'; plus.addEventListener('click',()=>{ changeQty(item.id,1); renderCart(); updateCartCount() })
      const minus = document.createElement('button'); minus.textContent='âˆ’'; minus.addEventListener('click',()=>{ changeQty(item.id,-1); renderCart(); updateCartCount() })
      qty.appendChild(minus); qty.appendChild(plus);
      row.appendChild(qty);
      list.appendChild(row);
    })
  }
  function changeQty(id,delta){ const cart = loadCart(); const idx = cart.findIndex(x=>x.id===id); if(idx===-1) return; cart[idx].qty += delta; if(cart[idx].qty<=0) cart.splice(idx,1); saveCart(cart) }

  document.getElementById('sendWhatsapp').addEventListener('click',sendWhatsappOrder);

  function sendWhatsappOrder(){ const cart = loadCart(); if(!cart.length){ alert('Carrinho vazio'); return }
    let total = 0; let lines = ['Pedido via catÃ¡logo 3D Prints:']; cart.forEach(i=>{lines.push(`${i.qty}x ${i.title} â€” ${formatBRL(i.price)} cada`); total += i.price*i.qty}); lines.push('---'); lines.push('Total: '+formatBRL(total)); lines.push('EndereÃ§o: '); lines.push('ObservaÃ§Ãµes: ');
    const text = encodeURIComponent(lines.join('\n'));
    // open in WhatsApp (web or app)
    const wa = `https://wa.me/?text=${text}`;
    window.open(wa,'_blank');
  }

  function formatBRL(v){ return v.toLocaleString('pt-BR',{style:'currency',currency:'BRL'}) }

  // init
  renderProductList();
  updateCartCount();
  </script>
</body>
</html>
